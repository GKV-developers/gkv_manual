/* Code captioned figure */
figure.code-figure {
  border: 1px solid #e0e0e0;
  border-radius: 6px;
  background: #f8f9fb;
  margin: 1.25rem 0;
}

/* Caption bar */
figure.code-figure > figcaption {
  display: flex;
  align-items: center;
  gap: .5rem;
  font-size: .9rem;
  font-weight: 600;
  padding: .45rem .75rem;
  border-bottom: 1px solid #eaecef;
  background: #f0f3f9;
}

/* Little “Code” pill so it's clearly a code caption, not a figure caption */
figure.code-figure > figcaption::before {
  content: "Code";
  font-weight: 700;
  font-size: .72rem;
  line-height: 1;
  padding: .2rem .45rem;
  border-radius: 999px;
  background: #e5eefc;
  border: 1px solid #d3e2fd;
}

/* Remove extra spacing so the code block attaches to the frame neatly */
figure.code-figure pre {
  margin: 0;
  border-radius: 0 0 6px 6px;
}

/* --- Left-align captioned code blocks in Material --- */
.md-typeset figure.code-figure {
  /* Material sets figure to center; override it */
  display: block;            /* avoid display: table centering */
  margin-left: 0;
  margin-right: 0;
  text-align: left;          /* prevent inheritance of center text */
}

.md-typeset figure.code-figure > figcaption {
  text-align: left;          /* Material centers figcaption */
  justify-content: flex-start;
}

.md-typeset figure.code-figure .highlight,
.md-typeset figure.code-figure pre {
  /* Code blocks may be wrapped in .highlight */
  margin-left: 0;
  margin-right: 0;
  text-align: left;
}

/* keep your rounded corners only on the bottom */
.md-typeset figure.code-figure .highlight pre,
.md-typeset figure.code-figure pre {
  border-radius: 0 0 6px 6px;
}

/* --- Make caption and code stretch to the full content width --- */
.md-typeset figure.code-figure {
  width: 100%;
  max-width: 100%;
}

.md-typeset figure.code-figure > figcaption {
  width: 100%; 
  justify-content: flex-start;
}

.md-typeset figure.code-figure .highlight,
.md-typeset figure.code-figure pre {
  width: 100%;
}

/* --- Make caption truly edge-to-edge in Material --- */
.md-typeset figure.code-figure {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

.md-typeset figure.code-figure > figcaption {
  width: 100% !important;
  max-width: none !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
  text-align: left;
  justify-content: flex-start;
  display: block;
  box-sizing: border-box;
}

.md-typeset figure.code-figure > .highlight,
.md-typeset figure.code-figure > pre {
  width: 100% !important;
  max-width: none !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
  box-sizing: border-box;
}

.md-typeset figure.code-figure {
  margin-left: 0 !important;
  margin-right: 0 !important;
}

/* Code figure number (e.g., "Figure 1.3") */
.code-figure-label {
  margin-top: 0.4rem;
  text-align: center;
  font-size: 0.9em;
  font-style: italic;
}